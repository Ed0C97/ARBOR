# =============================================================================
# A.R.B.O.R. Enterprise - Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION
# -----------------------------------------------------------------------------
APP_NAME=arbor-enterprise
APP_ENV=development  # development | staging | production
APP_DEBUG=true
APP_VERSION=1.0.0
APP_SECRET_KEY=your-secret-key-here  # REQUIRED in production

# GCP Project ID (for Secret Manager in production)
GCP_PROJECT_ID=

# Backend
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000

# =============================================================================
# SCHEMA-AGNOSTIC DATA SOURCE CONFIGURATION
# =============================================================================
# ARBOR is data-source agnostic. Configure ANY database and table schema here.
# No code changes required to work with different data structures.
# =============================================================================

# -----------------------------------------------------------------------------
# SOURCE DATABASE — READ-ONLY (your client's data)
# -----------------------------------------------------------------------------
# The database containing the entities you want ARBOR to enrich
SOURCE_DATABASE_URL=postgresql://user:password@host:5432/your_database
DATABASE_URL=  # DEPRECATED: use SOURCE_DATABASE_URL instead
DATABASE_SSL=true

# -----------------------------------------------------------------------------
# SCHEMA CONFIGURATION — Define your table schema
# -----------------------------------------------------------------------------
# Option 1: Inline JSON configuration
# SOURCE_SCHEMA_CONFIG='[{"entity_type":"product","table_name":"products","id_column":"id","required_mappings":{"name":"product_name"},"optional_mappings":{"category":"cat_id","city":"location","description":"desc"},"text_fields_for_embedding":["product_name","desc"]}]'

# Option 2: Path to JSON configuration file
# SOURCE_SCHEMA_CONFIG_FILE=/path/to/schema.json

# If neither is set, ARBOR uses default brands/venues schema for backwards compatibility

# -----------------------------------------------------------------------------
# ARBOR DATABASE — READ-WRITE (enrichments, gold standard, feedback)
# -----------------------------------------------------------------------------
ARBOR_DATABASE_URL=postgresql://arbor:password@host:5432/arbor_db
ARBOR_DATABASE_SSL=true

# Connection Pool Settings
DB_POOL_SIZE=40
DB_MAX_OVERFLOW=20
DB_POOL_RECYCLE=1800
DB_POOL_PRE_PING=true

# =============================================================================
# VECTOR DATABASE & KNOWLEDGE GRAPH
# =============================================================================

# Qdrant — Vector Search
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=
QDRANT_COLLECTION=entities_vectors
QDRANT_PREFER_GRPC=true

# Neo4j — Knowledge Graph
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=  # REQUIRED in production

# Redis — Caching & Session Store
REDIS_URL=redis://localhost:6379/0

# =============================================================================
# LLM PROVIDERS
# =============================================================================

# Google Gemini — Primary LLM (Text + Vision)
GOOGLE_API_KEY=  # REQUIRED
GOOGLE_MODEL=gemini-3-pro-preview

# Cohere — Embedding + Reranking
COHERE_API_KEY=  # REQUIRED
COHERE_EMBEDDING_MODEL=embed-v4.0
COHERE_RERANK_MODEL=rerank-v4.0-pro

# Fallback LLM Providers (optional)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

AZURE_API_KEY=
AZURE_API_BASE=

ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-sonnet-4-20250514

GROQ_API_KEY=
GROQ_MODEL=llama-3.3-70b-versatile

MISTRAL_API_KEY=
MISTRAL_MODEL=mistral-large-latest
MISTRAL_EMBEDDING_MODEL=mistral-embed

# LLM Routing
LLM_PRIMARY_PROVIDER=google
LLM_VISION_PROVIDER=google
LLM_EMBEDDING_PROVIDER=cohere
LLM_FAST_PROVIDER=google

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# Google Maps (for venue scraping)
GOOGLE_MAPS_API_KEY=

# Auth0
AUTH0_DOMAIN=
AUTH0_API_AUDIENCE=

# =============================================================================
# OBSERVABILITY & INFRASTRUCTURE
# =============================================================================

# Langfuse (LLM Observability)
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=
LANGFUSE_HOST=https://cloud.langfuse.com

# Kafka
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_DLQ_TOPIC=arbor-dlq

# Celery (Background Jobs)
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# Temporal
TEMPORAL_HOST=localhost:7233

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=arbor-api

# =============================================================================
# RESILIENCE SETTINGS
# =============================================================================

# Circuit Breaker
CIRCUIT_BREAKER_FAIL_MAX=5
CIRCUIT_BREAKER_RESET_TIMEOUT=60

# Retry Settings
RETRY_MAX_ATTEMPTS=3
RETRY_INITIAL_WAIT=0.5
RETRY_MAX_WAIT=5.0

# Cache Settings
SEMANTIC_CACHE_THRESHOLD=0.90
CACHE_TTL=3600

# Rate Limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# Node Timeouts
TIMEOUT_INTENT_NODE=2.0
TIMEOUT_SEARCH_NODE=5.0
TIMEOUT_SYNTHESIS_NODE=15.0
TIMEOUT_TOTAL_REQUEST=25.0
